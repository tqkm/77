Singleton
---
单例模式的特点是：私有的构造方法，成员变量为static，公有的访问方法<br>
懒汉式：
```
public class Singleton{
  public static Singleton singleton;
  private Singleton{};
  public static Singleton getSingleton(){
    if(singleton == null){
      singleton = new Singleton();
    }    
    return singleton;
  }
}
```
饿汉式：
```
public class Singleton{
  public static Singleton singleton = new Singleton();
  private Singleton{};
  public static Singleton getSingleton(){
    return singleton;
  }
}
```
很简单的可以看出这两种方式在多线程中根本不能保证是单例的<br>
双重校验锁：
```
public class Singleton{
  public volatile static Singleton singleton;
  private Singleton{};
  public static Singleton getSingleton(){
    if(singleton == null){
      synchronized(Singleton.class){
        if(singleton == null){
          singleton = new Singleton();
        }
      }
    }
    return singleton;
  }
}
```
注意这种方式要加上volatile修饰符，否则也不能保证多线程中的正确性<br>
推荐静态内部类方式，这种由jvm保证只有一个对象，并且还能保证延迟加载(加载Singleton类时不会加载静态内部类，只有调用时才加载)
```
public class Singleton{
  
  private Singleton{};
  private static class SS{
    private static Singleton singleton = new Singleton();
  }
  public Singleton getSingleton(){
    return SS.singleton;
  }
}
```

